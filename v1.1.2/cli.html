<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="https://avatars0.githubusercontent.com/u/26362587?s=200&v=4">
  <link rel="stylesheet" href="/assets/bulma.css">
  <link rel="stylesheet" href="/assets/syntax-highlight.css">
  <style>
  #swagger-ui pre.version {
    padding: 2px !important;
    background: initial !important;
  }
  #swagger-ui .topbar {
    display: none;
  }
  blockquote {
    background: #f99;
  }
  aside.menu > ul { 
    position: fixed;
    overflow-y: auto;
    height: calc(100vh - 150px);
  }
  body > #swagger-ui,
  body > .columns {
    margin-top: 55px;
  }
  h2 code, h3 code, h4 code {
    color: black;
  }

  </style><link type="application/atom+xml" rel="alternate" href="https://ocr-d.github.io/feed.xml" title="OCR-D" /></head>
<body><nav class="navbar is-transparent is-fixed-top">
  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="https://avatars0.githubusercontent.com/u/26362587?s=200&v=4" height="28">
    </a>
    <div class="navbar-burger burger" data-target="ocrd-navbar-menu">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div id="ocrd-navbar-menu" class="navbar-menu">
    <div class="navbar-start">
      <a class="navbar-item" href="cli">CLI</a>
      <a class="navbar-item" href="mets">METS</a>
      <a class="navbar-item" href="ocrd_zip">OCRD-ZIP</a>
      <a class="navbar-item" href="ocrd_tool">ocrd-tool.json</a>
      <a class="navbar-item" href="swagger">Swagger</a>
      <a class="navbar-item" href="docker">Dockerfile</a>
    </div>

    <div class="navbar-end">
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">Older versions</a>
        <div class="navbar-dropdown">
          <a class="navbar-item" href="v1.0.0">v1.0.0</a>
          <a class="navbar-item" href="v1.1.0">v1.1.0</a>
          <a class="navbar-item" href="v1.1.1">v1.1.1</a>
        </div>
      </div>
      <span class="navbar-item">
        <a href="https://github.com/OCR-D"><img src="https://www.vectorlogo.zone/logos/github/github-tile.svg"/></a>
        &nbsp;
        <a href="https://hub.docker.com/r/ocrd"><img src="https://www.vectorlogo.zone/logos/docker/docker-tile.svg"/></a>
        &nbsp;
        <a href="https://ocr-d.de"><img src="https://www.vectorlogo.zone/logos/fileformatinfo/fileformatinfo-tile.svg"/></a>
      </span>
    </div>
  </div>
</nav>
<div class="columns">
      <aside class="column is-one-third menu">
        <ul class="menu-list column is-one-third">
  <li><a href="#command-line-interface-cli">Command Line Interface (CLI)</a>
    <ul>
      <li><a href="#cli-executable-name">CLI executable name</a></li>
      <li><a href="#mandatory-parameters">Mandatory parameters</a>
        <ul>
          <li><a href="#-m---mets-mets_in"><code class="highlighter-rouge">-m, --mets METS_IN</code></a></li>
          <li><a href="#-w---working-dir-dir"><code class="highlighter-rouge">-w, --working-dir DIR</code></a></li>
          <li><a href="#-i---input-file-grp-grp"><code class="highlighter-rouge">-I, --input-file-grp GRP</code></a></li>
          <li><a href="#-o---output-file-grp-grp"><code class="highlighter-rouge">-O, --output-file-grp GRP</code></a></li>
        </ul>
      </li>
      <li><a href="#optional-parameters">Optional parameters</a>
        <ul>
          <li><a href="#-g---group-id-groupid"><code class="highlighter-rouge">-g, --group-id GROUPID</code></a></li>
          <li><a href="#-p---parameter-param_json"><code class="highlighter-rouge">-p, --parameter PARAM_JSON</code></a></li>
          <li><a href="#-l---log-level-loglevel"><code class="highlighter-rouge">-l, --log-level LOGLEVEL</code></a></li>
          <li><a href="#-o---output-mets-mets_out"><code class="highlighter-rouge">-o, --output-mets METS_OUT</code></a></li>
        </ul>
      </li>
      <li><a href="#return-value">Return value</a></li>
      <li><a href="#logging">Logging</a></li>
      <li><a href="#example">Example</a>
        <ul>
          <li><a href="#description">Description</a></li>
          <li><a href="#input-mets-file">Input METS file</a></li>
          <li><a href="#input-json-parameter-file">Input JSON parameter file</a></li>
          <li><a href="#output-mets-file">Output METS file</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

      </aside>

      <main class="container content column is-two-thirds" aria-label="Content">
        <h1 id="command-line-interface-cli">Command Line Interface (CLI)</h1>

<h2 id="cli-executable-name">CLI executable name</h2>

<p>All CLI provided by MP must be standalone executables, installable into <code class="highlighter-rouge">$PATH</code>.</p>

<p>Every CLI executableâ€™s name must begin with <code class="highlighter-rouge">ocrd-</code>.</p>

<p>Examples:</p>
<ul>
  <li><code class="highlighter-rouge">ocrd-kraken-binarize</code></li>
  <li><code class="highlighter-rouge">ocrd-tesserocr-recognize</code></li>
</ul>

<h2 id="mandatory-parameters">Mandatory parameters</h2>

<h3 id="-m---mets-mets_in"><code class="highlighter-rouge">-m, --mets METS_IN</code></h3>

<p>Input METS URL</p>

<h3 id="-w---working-dir-dir"><code class="highlighter-rouge">-w, --working-dir DIR</code></h3>

<p>Working Directory.</p>

<h3 id="-i---input-file-grp-grp"><code class="highlighter-rouge">-I, --input-file-grp GRP</code></h3>

<p>File group(s) used as input.</p>

<h3 id="-o---output-file-grp-grp"><code class="highlighter-rouge">-O, --output-file-grp GRP</code></h3>

<p>File group(s) used as output.</p>

<h2 id="optional-parameters">Optional parameters</h2>

<h3 id="-g---group-id-groupid"><code class="highlighter-rouge">-g, --group-id GROUPID</code></h3>

<p>The <code class="highlighter-rouge">mets:file@GROUPID</code> to process. If no groupID is defined all files within the <code class="highlighter-rouge">inputGrp</code> will be processed. Repeatable and multiple IDs can be provided separated by comma.</p>

<h3 id="-p---parameter-param_json"><code class="highlighter-rouge">-p, --parameter PARAM_JSON</code></h3>

<p>URL of parameter file in JSON format</p>

<h3 id="-l---log-level-loglevel"><code class="highlighter-rouge">-l, --log-level LOGLEVEL</code></h3>

<p>Minimum Log level. One of <code class="highlighter-rouge">OFF</code>, <code class="highlighter-rouge">ERROR</code>, <code class="highlighter-rouge">WARN</code>, <code class="highlighter-rouge">INFO</code> (default), <code class="highlighter-rouge">DEBUG</code>, <code class="highlighter-rouge">TRACE</code>).</p>

<p>Actual mechanism for filtering log messages must not be implemented by
processors.</p>

<h3 id="-o---output-mets-mets_out"><code class="highlighter-rouge">-o, --output-mets METS_OUT</code></h3>

<p>File path where processor MUST write resulting METS to. If not set, output METS is expected to be in the file <code class="highlighter-rouge">mets.xml</code> in the working directory.</p>

<h2 id="return-value">Return value</h2>

<p>Successful execution should signal <code class="highlighter-rouge">0</code>. Any non-zero return value is considered a failure.</p>

<h2 id="logging">Logging</h2>

<p>Data printed to <code class="highlighter-rouge">STDERR</code> and <code class="highlighter-rouge">STDOUT</code> is captured linewise and stored as log data.</p>

<p>Processors can adjust their logging verbosity according to the <code class="highlighter-rouge">--log-level</code> parameter but they are not required to.</p>

<p>Errors, especially those leading to an exception, should be printed to <code class="highlighter-rouge">STDERR</code>.</p>

<h2 id="example">Example</h2>

<p>This is how the CLI provided by the MP should work:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> ocrd-kraken-binarize <span class="se">\</span>
    <span class="nt">--mets</span> <span class="s2">"file:///path/to/file/mets.xml"</span> <span class="se">\</span>
    <span class="nt">--working-dir</span> <span class="s2">"file:///path/to/workingDir/"</span> <span class="se">\</span>
    <span class="nt">--output-mets</span> /path/to/workingDir/metsOutput.xml <span class="se">\</span>
    <span class="nt">--parameters</span> <span class="s2">"file:///path/to/file/parameters.json"</span> <span class="se">\</span>
    <span class="nt">--group-id</span> OCR-D-IMG_0001,OCR-D-IMG_0002 <span class="se">\</span>
    <span class="nt">--group-id</span> OCR-D-IMG_0003 <span class="se">\</span>
    <span class="nt">-input-file-grp</span> OCR-D-IMG <span class="se">\</span>
    <span class="nt">-output-file-grp</span> OCR-D-IMG-BIN-KRAKEN
</code></pre></div></div>

<p>And this is how it will be called with the <code class="highlighter-rouge">ocrd</code> CLI:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$&gt;</span> ocrd process <span class="se">\</span>
    <span class="nt">-m</span> <span class="s2">"file:///path/to/file/mets.xml"</span> <span class="se">\</span>
    <span class="nt">-w</span> <span class="s2">"file:///path/to/workingDir/"</span> <span class="se">\</span>
    <span class="nt">-o</span> /path/to/workingDir/metsOutput.xml <span class="se">\</span>
    <span class="nt">-p</span> <span class="s2">"file:///path/to/file/parameters.json"</span> <span class="se">\</span>
    <span class="nt">-g</span> OCR-D-IMG_0001,OCR-D-IMG_0002 <span class="se">\</span>
    <span class="nt">-g</span> OCR-D-IMG_0003 <span class="se">\</span>
    <span class="nt">-I</span> OCR-D-IMG <span class="se">\</span>
    <span class="nt">-O</span> OCR-D-IMG-BIN-KRAKEN
    
    preprocessing/binarization/kraken-binarize
</code></pre></div></div>

<h3 id="description">Description</h3>

<p>Binarize images from METS file with GROUPIDs id0001, id0002 and id0003.</p>

<h3 id="input-mets-file">Input METS file</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mets:mets&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>

  <span class="nt">&lt;mets:fileSec&gt;</span>
      
    <span class="nt">&lt;mets:fileGrp</span> <span class="na">USE=</span><span class="s">"OCR-D-IMG"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0001"</span> <span class="na">GROUPID=</span><span class="s">"OCR-D-IMG_0001"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tif"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000001.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0002"</span> <span class="na">GROUPID=</span><span class="s">"OCR-D-IMG_0002"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tif"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000002.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0003"</span> <span class="na">GROUPID=</span><span class="s">"OCR-D-IMG_0003"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tif"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000003.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
    <span class="nt">&lt;/mets:fileGrp&gt;</span>
      
  <span class="nt">&lt;/mets:fileSec&gt;</span>
<span class="nt">&lt;/mets:mets&gt;</span>
</code></pre></div></div>

<h3 id="input-json-parameter-file">Input JSON parameter file</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"threshold"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w">
    </span><span class="s2">"zoom"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"range"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">],</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="output-mets-file">Output METS file</h3>

<p>This is the METS file as it is returned by the MP CLI:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;mets:mets&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>

  <span class="nt">&lt;mets:fileSec&gt;</span>
      
    <span class="nt">&lt;mets:fileGrp</span> <span class="na">USE=</span><span class="s">"OCR-D-IMG"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0001"</span> <span class="na">GROUPID=</span><span class="s">"OCR-D-IMG_0001"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tif"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000001.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0002"</span> <span class="na">GROUPID=</span><span class="s">"OCR-D-IMG_0002"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tif"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000002.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG_0003"</span> <span class="na">GROUPID=</span><span class="s">"OCR-D-IMG_0003"</span> <span class="na">MIMETYPE=</span><span class="s">"image/tif"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"https://github.com/OCR-D/spec/raw/master/io/example/00000003.tif"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
    <span class="nt">&lt;/mets:fileGrp&gt;</span>
      
    <span class="nt">&lt;mets:fileGrp</span> <span class="na">USE=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN_0001"</span> <span class="na">GROUPID=</span><span class="s">"OCR-D-IMG_0001"</span> <span class="na">MIMETYPE=</span><span class="s">"image/png"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"file:///tmp/ocrd-workspace-ABC123/0001.png"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN_0002"</span> <span class="na">GROUPID=</span><span class="s">"OCR-D-IMG_0002"</span> <span class="na">MIMETYPE=</span><span class="s">"image/png"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"file:///tmp/ocrd-workspace-ABC123/0002.png"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
      <span class="nt">&lt;mets:file</span> <span class="na">ID=</span><span class="s">"OCR-D-IMG-BIN-KRAKEN_0003"</span> <span class="na">GROUPID=</span><span class="s">"OCR-D-IMG_0003"</span> <span class="na">MIMETYPE=</span><span class="s">"image/png"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;mets:FLocat</span> <span class="na">LOCTYPE=</span><span class="s">"URL"</span> <span class="na">xlink:href=</span><span class="s">"file:///tmp/ocrd-workspace-ABC123/0003.png"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/mets:file&gt;</span>
    <span class="nt">&lt;/mets:fileGrp&gt;</span>
      
  <span class="nt">&lt;/mets:fileSec&gt;</span>
<span class="nt">&lt;/mets:mets&gt;</span>
</code></pre></div></div>

      </main>
    </div><footer class="level">

  <div class="level-item">
    <p>
<!-- BEGIN-EVAL echo "Based on <a href="https://github.com/OCR-D/spec/releases/tag/${SPEC_VERSION:-dev}">OCR-D/spec ${SPEC_VERSION:-dev}</a>." -->
Based on <a href=https://github.com/OCR-D/spec/releases/tag/v1.1.2>OCR-D/spec v1.1.2</a>.

<!-- END-EVAL -->
    </p>
    &nbsp;


<!-- BEGIN-EVAL echo "<p>Generated on <code>$(date)</code></p>" -->
<p>Generated on <code>Mon Apr 23 12:17:49 CEST 2018</code></p>

<!-- END-EVAL -->
  </div>

</footer>
<script src="/assets/script.js"></script>
</body>

</html>
