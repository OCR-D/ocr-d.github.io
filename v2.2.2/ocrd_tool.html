<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="https://avatars0.githubusercontent.com/u/26362587?s=200&v=4">
  <link rel="stylesheet" href="/assets/bulma.css">
  <link rel="stylesheet" href="/assets/syntax-highlight.css">
  <style>
  #swagger-ui pre.version {
    padding: 2px !important;
    background: initial !important;
  }
  #swagger-ui .topbar {
    display: none;
  }
  blockquote {
    background: #f99;
  }
  aside.menu > ul { 
    position: fixed;
    overflow-y: auto;
    height: calc(100vh - 150px);
  }
  body > #swagger-ui,
  body > .columns {
    margin-top: 55px;
  }
  h2 code, h3 code, h4 code {
    color: black;
  }

  </style><link type="application/atom+xml" rel="alternate" href="https://ocr-d.github.io/feed.xml" title="OCR-D" /></head>
<body><nav class="navbar is-transparent is-fixed-top">

  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="https://avatars0.githubusercontent.com/u/26362587?s=200&v=4" height="28"/>
    </a>
    <div class="navbar-burger burger" data-target="ocrd-navbar-menu">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div id="ocrd-navbar-menu" class="navbar-menu">
    <div class="navbar-start">

      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">Specs</a>
        <div class="navbar-dropdown">
          <a class="navbar-item" href="/cli">CLI</a>
          <a class="navbar-item" href="/mets">METS</a>
          <a class="navbar-item" href="/page">PAGE</a>
          <a class="navbar-item" href="/ocrd_zip">OCRD-ZIP</a>
          <a class="navbar-item" href="/ocrd_tool">ocrd-tool.json</a>
          <a class="navbar-item" href="/docker">Dockerfile</a>
        </div>
      </div>

      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">Docs</a>
        <div class="navbar-dropdown">
          <a class="navbar-item" href="/docs/guide">Guide</a>
          <a class="navbar-item" href="/docs/cookbook">Cookbook</a>
          <a class="navbar-item" href="/docs/faq">FAQ</a>
          <a class="navbar-item" href="/docs/dita">Documenting with DITA</a>
          <a class="navbar-item" href="/docs/vbox">Setting up VirtualBox</a>
        </div>
      </div>

      <a class="navbar-item" href="/glossary">Glossary</a>

    </div>

    <div class="navbar-end">

      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">Older versions</a>
        <div class="navbar-dropdown">
          <a class="navbar-item" href="/v1.0.0">v1.0.0</a>
          <a class="navbar-item" href="/v1.1.0">v1.1.0</a>
          <a class="navbar-item" href="/v1.1.1">v1.1.1</a>
          <a class="navbar-item" href="/v1.1.2">v1.1.2</a>
          <a class="navbar-item" href="/v1.1.3">v1.1.3</a>
          <a class="navbar-item" href="/v1.1.4">v1.1.4</a>
          <a class="navbar-item" href="/v1.1.5">v1.1.5</a>
          <a class="navbar-item" href="/v1.2.0">v1.2.0</a>
          <a class="navbar-item" href="/v1.3.0">v1.3.0</a>
          <a class="navbar-item" href="/v2.0.0">v2.0.0</a>
          <a class="navbar-item" href="/v2.1.0">v2.1.0</a>
          <a class="navbar-item" href="/v2.1.1">v2.1.1</a>
          <a class="navbar-item" href="/v2.1.2">v2.1.1</a>
          <a class="navbar-item" href="/v2.2.0">v2.2.0</a>
          <a class="navbar-item" href="/v2.2.1">v2.2.1</a>
          <a class="navbar-item" href="/">v2.2.2</a>
        </div>
      </div>

      <span class="navbar-item">
        <a href="https://github.com/OCR-D"><img src="https://www.vectorlogo.zone/logos/github/github-tile.svg"/></a>
        &nbsp;
        <a href="https://hub.docker.com/r/ocrd"><img src="https://www.vectorlogo.zone/logos/docker/docker-tile.svg"/></a>
        &nbsp;
        <a href="https://ocr-d.de"><img src="https://www.vectorlogo.zone/logos/fileformatinfo/fileformatinfo-tile.svg"/></a>
      </span>

    </div>
  </div>
</nav>
<div class="columns">
      <aside class="column is-one-third menu">
        <ul class="menu-list column is-one-third">
  <li><a href="#ocrd-tooljson">ocrd-tool.json</a>
    <ul>
      <li><a href="#definition">Definition</a></li>
      <li><a href="#example">Example</a></li>
    </ul>
  </li>
</ul>

      </aside>

      <main class="container content column is-two-thirds" aria-label="Content">
        <h1 id="ocrd-tooljson">ocrd-tool.json</h1>

<p>Tools MUST be described in a file <code class="highlighter-rouge">ocrd-tool.json</code> in the root of the repository.</p>

<p>It must contain a JSON object adhering to the <a href="#Definition">ocrd-tool JSON Schema</a>.</p>

<p>In particular, every tool provided must be described in an array item under the
<code class="highlighter-rouge">tools</code> key. These definitions drive the <a href="cli">CLI</a> and the <a href="swagger">web
services</a>.</p>

<p>To validate a <code class="highlighter-rouge">ocrd-tool.json</code> file, use <code class="highlighter-rouge">ocrd ocrd-tool /path/to/ocrd-tool.json validate</code>.</p>

<h2 id="definition">Definition</h2>

<!-- Regenerate with 'shinclude -i ocrd_tool.md'. See https://github.com/kba/shinclude -->
<!-- BEGIN-EVAL -w '```yaml' '```' -- cat ./ocrd_tool.schema.yml -->
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
<span class="na">description</span><span class="pi">:</span> <span class="s">Schema for tools by OCR-D MP</span>
<span class="na">required</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">version</span>
  <span class="pi">-</span> <span class="s">git_url</span>
  <span class="pi">-</span> <span class="s">tools</span>
<span class="na">additionalProperties</span><span class="pi">:</span> <span class="no">false</span>
<span class="na">properties</span><span class="pi">:</span>
  <span class="na">version</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Version</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">tool,</span><span class="nv"> </span><span class="s">expressed</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">MAJOR.MINOR.PATCH."</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">pattern</span><span class="pi">:</span> <span class="s1">'</span><span class="s">^[0-9]+\.[0-9]+\.[0-9]+$'</span>
  <span class="na">git_url</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s">Github/Gitlab URL</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">format</span><span class="pi">:</span> <span class="s">url</span>
  <span class="na">dockerhub</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s">DockerHub image</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
  <span class="na">tools</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
    <span class="na">additionalProperties</span><span class="pi">:</span> <span class="no">false</span>
    <span class="na">patternProperties</span><span class="pi">:</span>
      <span class="s1">'</span><span class="s">ocrd-.*'</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
        <span class="na">additionalProperties</span><span class="pi">:</span> <span class="no">false</span>
        <span class="na">required</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">description</span>
          <span class="pi">-</span> <span class="s">steps</span>
          <span class="pi">-</span> <span class="s">executable</span>
          <span class="pi">-</span> <span class="s">categories</span>
        <span class="na">properties</span><span class="pi">:</span>
          <span class="na">executable</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s">The name of the CLI executable in $PATH</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
          <span class="na">parameters</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s">Object describing the parameters of a tool. Keys are parameter names, values sub-schemas.</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
            <span class="na">patternProperties</span><span class="pi">:</span>
              <span class="s2">"</span><span class="s">.*"</span><span class="pi">:</span>
                <span class="na">type</span><span class="pi">:</span> <span class="s">object</span>
                <span class="na">additionalProperties</span><span class="pi">:</span> <span class="no">false</span>
                <span class="na">required</span><span class="pi">:</span>
                  <span class="pi">-</span> <span class="s">description</span>
                  <span class="pi">-</span> <span class="s">type</span>
                  <span class="c1"># also either 'default' or 'required'</span>
                <span class="na">properties</span><span class="pi">:</span>
                  <span class="na">type</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Data type of this parameter</span>
                    <span class="na">enum</span><span class="pi">:</span>
                      <span class="pi">-</span> <span class="s">string</span>
                      <span class="pi">-</span> <span class="s">number</span>
                      <span class="pi">-</span> <span class="s">boolean</span>
                  <span class="na">format</span><span class="pi">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Subtype, such as `float` for type `number` or `uri` for type `string`.</span>
                  <span class="na">description</span><span class="pi">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Concise description of syntax and semantics of this parameter</span>
                  <span class="na">required</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">boolean</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Whether this parameter is required</span>
                  <span class="na">default</span><span class="pi">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">Default value when not provided by the user</span>
                  <span class="na">enum</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">List the allowed values if a fixed list.</span>
          <span class="na">description</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s">Concise description what the tool does</span>
          <span class="na">categories</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s">Tools belong to this categories, representing modules within the OCR-D project structure</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
            <span class="na">items</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">enum</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">Image preprocessing</span>
                <span class="pi">-</span> <span class="s">Layout analysis</span>
                <span class="pi">-</span> <span class="s">Text recognition and optimization</span>
                <span class="pi">-</span> <span class="s">Model training</span>
                <span class="pi">-</span> <span class="s">Long-term preservation</span>
                <span class="pi">-</span> <span class="s">Quality assurance</span>
          <span class="na">steps</span><span class="pi">:</span>
            <span class="na">description</span><span class="pi">:</span> <span class="s">This tool can be used at these steps in the OCR-D functional model</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">array</span>
            <span class="na">items</span><span class="pi">:</span>
              <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
              <span class="na">enum</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">preprocessing/characterization</span>
                <span class="pi">-</span> <span class="s">preprocessing/optimization</span>
                <span class="pi">-</span> <span class="s">preprocessing/optimization/cropping</span>
                <span class="pi">-</span> <span class="s">preprocessing/optimization/deskewing</span>
                <span class="pi">-</span> <span class="s">preprocessing/optimization/despeckling</span>
                <span class="pi">-</span> <span class="s">preprocessing/optimization/dewarping</span>
                <span class="pi">-</span> <span class="s">preprocessing/optimization/binarization</span>
                <span class="pi">-</span> <span class="s">preprocessing/optimization/grayscale_normalization</span>
                <span class="pi">-</span> <span class="s">recognition/text-recognition</span>
                <span class="pi">-</span> <span class="s">recognition/font-identification</span>
                <span class="pi">-</span> <span class="s">layout/segmentation</span>
                <span class="pi">-</span> <span class="s">layout/segmentation/region</span>
                <span class="pi">-</span> <span class="s">layout/segmentation/line</span>
                <span class="pi">-</span> <span class="s">layout/segmentation/word</span>
                <span class="pi">-</span> <span class="s">layout/segmentation/classification</span>
                <span class="pi">-</span> <span class="s">layout/analysis</span>
</code></pre></div></div>

<!-- END-EVAL -->

<h2 id="example">Example</h2>

<p>This is from the <a href="https://github.com/OCR-D/ocrd_tesserocr">ocrd_tesserocr sample project</a>:</p>

<!-- BEGIN-EVAL -w '```json' '```' -- cat ../ocrd_kraken/ocrd-tool.json -->
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"git_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://github.com/OCR-D/ocrd_kraken"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tools"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"ocrd-kraken-binarize"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"executable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ocrd-kraken-binarize"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"Image preprocessing"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"preprocessing/optimization/binarization"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Binarize images with kraken"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"level-of-operation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"page"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"enum"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"page"</span><span class="p">,</span><span class="w"> </span><span class="s2">"block"</span><span class="p">,</span><span class="w"> </span><span class="s2">"line"</span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ocrd-kraken-segment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"executable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ocrd-kraken-segment"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"Layout analysis"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"layout/segmentation/region"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Block segmentation with kraken"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"text_direction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sets principal text direction"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"enum"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"horizontal-lr"</span><span class="p">,</span><span class="w"> </span><span class="s2">"horizontal-rl"</span><span class="p">,</span><span class="w"> </span><span class="s2">"vertical-lr"</span><span class="p">,</span><span class="w"> </span><span class="s2">"vertical-rl"</span><span class="p">],</span><span class="w">
          </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontal-lr"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"script_detect"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enable script detection on segmenter output"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"maxcolseps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w"> </span><span class="s2">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"integer"</span><span class="p">,</span><span class="w"> </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">},</span><span class="w">
        </span><span class="s2">"scale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"number"</span><span class="p">,</span><span class="w"> </span><span class="s2">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"float"</span><span class="p">,</span><span class="w"> </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">},</span><span class="w">
        </span><span class="s2">"black_colseps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="p">,</span><span class="w"> </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">},</span><span class="w">
        </span><span class="s2">"white_colseps"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="p">,</span><span class="w"> </span><span class="s2">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ocrd-kraken-ocr"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"executable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ocrd-kraken-ocr"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Text recognition and optimization"</span><span class="p">],</span><span class="w">
      </span><span class="s2">"steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"recognition/text-recognition"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OCR with kraken"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"lines-json"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"url"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"required"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"URL to line segmentation in JSON"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">

  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<!-- END-EVAL -->


      </main>
    </div><footer class="level">

  <div class="level-item">
    <p>
<!-- BEGIN-EVAL echo "Based on <a href="https://github.com/OCR-D/spec/releases/tag/${SPEC_VERSION:-dev}">OCR-D/spec ${SPEC_VERSION:-dev}</a>." -->
Based on <a href=https://github.com/OCR-D/spec/releases/tag/v2.2.2>OCR-D/spec v2.2.2</a>.

<!-- END-EVAL -->
    </p>
    &nbsp;


<!-- BEGIN-EVAL echo "<p>Generated on <code>$(date)</code></p>" -->
<p>Generated on <code>Tue Aug 14 10:46:54 CEST 2018</code></p>

<!-- END-EVAL -->
  </div>

</footer>
<script src="/assets/script.js"></script>
</body>

</html>
